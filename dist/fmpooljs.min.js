!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e,n;e="undefined"!=typeof self?self:void 0,n=function(e){if(!e)throw new Error("fmpooljs requires jQuery to be loaded first!");const n="0.1.14",t=document.currentScript,o=t?.dataset;let i=!1;function r(...e){i&&l("log",e)}function s(...e){l("info",e)}function l(e,n){const t=`[fmpooljs:${e}] `;1==n.length&&("string"==typeof n[0]||n[0]instanceof String)?console.log(t+n):console.log(t,n)}function a(t,l,u){s("init version "+n),r("createFmpool",t,l,u,t.location?.href,u,o);const d=t.sessionStorage;let c=t,m=null;function p(e,n){if(null!=m)return r("reinit",m,u,c.location?.href,m.location.href),f=a(m,m.$),m.fmpooljs=f,r("Reinitialized fmpooljs for iframe context:",m.location?.href||"(no href)",m),m=null,f(e,n);const o=l(e,n);return r("Selected elements:",e,o,t.location?.href),o.readonly=function(){var e=this.find("input"),n=this.find(".pss_editor_container");return this.removeClass("pss_readwrite").addClass("pss_readonly"),e.removeClass("pss_field_input").addClass("pss_read_only_editor").attr("readonly","readonly"),n.removeClass("pss_editor_container").addClass("pss_entry_editor"),this.find(".pss_actions").remove(),r("Set element readonly:",this),o},o.clear=function(){return o.val(""),r("Cleared element(s):",o),o},o.countAmountOfElements=function(){const e=this.length;return r("Counted elements:",e),e},o.saveAmountIfElementsToSession=function(e){const n=this.countAmountOfElements();return d.setItem(e,n),r("Saved element count to session:",e,"=",n),o},o.readonlyOnSessionCondition=function(e,n){const t=d.getItem(e);return("function"==typeof n?n(t):t===n)?(this.readonly(),r("Condition met for readonly:",e,t)):r("Condition not met for readonly:",e,t),o},o.saveValueToStore=function(e){const n=o.val();return r("Save value to store:",e,n),d.setItem(e,n),o},o.saveFieldValueToStore=function(e){let n=o.find("input").val();return void 0===n&&(n=o.find(".pss_field_value").text().trim()),r("Save field value to store:",e,n),d.setItem(e,n),o},o.getFieldValue=function(){let e=o.find("input");r("Try find input field",e);let n=e.val();if(void 0===n){let e=o.find(".pss_field_value");r("Try find text field",e),n=e.text().trim()}return r("Found Field Value: "+n),n},o.clearOnSessionValueCondition=function(e,n){const t=d.getItem(e);return r("Check condition for clear value:",e,t,n),("function"==typeof n?n(t):t===n)&&(o.clear(),r("Value cleared",o)),o},o.prefillFromStore=function(e){const n=d.getItem(e);return r("Prefill from store",e,n,o),o.fillAutoCompleteTextField(n),o},o}return void 0!==u&&(m=u),s(["Configurations: ",o]),o?.hideSelector&&e(o.hideSelector).hide(),p.setSessionItem=function(e,n){d.setItem(e,n),r("Session item set:",e,"=",n)},p.getSessionItem=function(e){const n=d.getItem(e);return r("Session item get:",e,"=",n),n},p.unevenCompare=function(e){const n=n=>n!=e;return r("unevenCompare created:",n),n},p.evenCompare=function(e){const n=n=>n==e;return r("evenCompare created:",n),n},p.createCustomButton=function(n,t,o){r("createCustomButton:",n,t,o);var i=`<div class='customAddContainer'>\n                <a target='_blank' href='${t}' class='pss_button add_button pss_action'><span><b>${n}</b></span></a>\n            </div>`;p(o).append(i),e(".customAddContainer").css({" margin-top":"-36px","text-align":"center"}),r("link set to: ",e(".customAddContainer a").attr("href"))},p.getEnvoirmentUrl=function(){var e=location.href;r("getEnvoirmentUrl -> current url"+e);var n=e.substring(0,e.indexOf("case"));return r("getEnvoirmentUrl: "+n),n},p.buildUrl=function(e){var n=p.getEnvoirmentUrl()+e;return r("buildUrl: "+n),n},p.hideParent=function(){if(r("hideParent: ",o?.hideSelector),o?.hideSelector){let n=e(o.hideSelector);r("found selector: ",n),n.hide()}},p.enableLogging=function(){i=!0,r("Logging enabled")},p.disableLogging=function(){i=!1,r("Logging disabled")},p.version=n,p}let f=a(window,e);return f.reinitialize=function(e,n){if(!e||!n)return console.error("[fmpooljs] reinitialize() requires a window and jQuery instance."),null;const t=a(e,n);return e.fmpooljs=t,r("Reinitialized fmpooljs for iframe context:",e.location?.href||"(no href)"),t},f.exposeToIframes=function(){if(!window.frames||0===window.frames.length)return void r("No iframes found in this window");const n=Array.from(window.frames);let t=0;for(let o=0;o<n.length;o++){const i=n[o];try{i.fmpooljs=a(window,e,i),r("Attached fmpooljs to iframe:",i.location?.href||"(no href)"),t++}catch(e){r("Skipped cross-origin iframe:",e.message)}}r(`fmpooljs exposed to ${t} iframe(s)`)},f.version=n,f},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):e.fmpooljs=n(e.jQuery)});
