!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e,n;e="undefined"!=typeof self?self:void 0,n=function(e){if(!e)throw new Error("fmpooljs requires jQuery to be loaded first!");const n="0.1.6",o=document.currentScript,t=o?.dataset;let i=!1;function r(...e){i&&l("log",e)}function s(...e){l("info",e)}function l(e,n){const o=`[fmpooljs:${e}] `;1==n.length&&("string"==typeof n[0]||n[0]instanceof String)?console.log(o+n):console.log(o,n)}function f(o,l,c){s("init version "+n),r("createFmpool",o,l,c,o.location?.href,c,t);const u=o.sessionStorage;let d=o,m=null;function p(e,n){if(null!=m)return r("reinit",m,c,d.location?.href,m.location.href),a=f(m,m.$),m.fmpooljs=a,r("Reinitialized fmpooljs for iframe context:",m.location?.href||"(no href)",m),m=null,a(e,n);const t=l(e,n);return r("Selected elements:",e,t,o.location?.href),t.readonly=function(){var e=this.find("input"),n=this.find(".pss_editor_container");return this.removeClass("pss_readwrite").addClass("pss_readonly"),e.removeClass("pss_field_input").addClass("pss_read_only_editor").attr("readonly","readonly"),n.removeClass("pss_editor_container").addClass("pss_entry_editor"),this.find(".pss_actions").remove(),r("Set element readonly:",this),t},t.clear=function(){return t.val(""),r("Cleared element(s):",t),t},t.countAmountOfElements=function(){const e=this.length;return r("Counted elements:",e),e},t.saveAmountIfElementsToSession=function(e){const n=this.countAmountOfElements();return u.setItem(e,n),r("Saved element count to session:",e,"=",n),t},t.readonlyOnSessionCondition=function(e,n){const o=u.getItem(e);return("function"==typeof n?n(o):o===n)?(this.readonly(),r("Condition met for readonly:",e,o)):r("Condition not met for readonly:",e,o),t},t.saveValueToStore=function(e){const n=t.val();return r("Save value to store:",e,n),u.setItem(e,n),t},t.saveFieldValueToStore=function(e){const n=t.find("input").val();return r("Save field value to store:",e,n),u.setItem(e,n),t},t.clearOnSessionValueCondition=function(e,n){const o=u.getItem(e);return r("Check condition for clear value:",e,o,n),("function"==typeof n?n(o):o===n)&&(t.clear(),r("Value cleared",t)),t},t.prefillFromStore=function(e){const n=u.getItem(e);return r("Prefill from store",e,n,t),t.fillAutoCompleteTextField(n),t},t}return void 0!==c&&(m=c),s(["Configurations: ",t]),t?.hideSelector&&e(t.hideSelector).hide(),p.setSessionItem=function(e,n){u.setItem(e,n),r("Session item set:",e,"=",n)},p.getSessionItem=function(e){const n=u.getItem(e);return r("Session item get:",e,"=",n),n},p.unevenCompare=function(e){const n=n=>n!=e;return r("unevenCompare created:",n),n},p.evenCompare=function(e){const n=n=>n==e;return r("evenCompare created:",n),n},p.enableLogging=function(){i=!0,r("Logging enabled")},p.disableLogging=function(){i=!1,r("Logging disabled")},p.version=n,p}let a=f(window,e);return a.reinitialize=function(e,n){if(!e||!n)return console.error("[fmpooljs] reinitialize() requires a window and jQuery instance."),null;const o=f(e,n);return e.fmpooljs=o,r("Reinitialized fmpooljs for iframe context:",e.location?.href||"(no href)"),o},a.exposeToIframes=function(){if(!window.frames||0===window.frames.length)return void r("No iframes found in this window");const n=Array.from(window.frames);let o=0;for(let t=0;t<n.length;t++){const i=n[t];try{i.fmpooljs=f(window,e,i),r("Attached fmpooljs to iframe:",i.location?.href||"(no href)"),o++}catch(e){r("Skipped cross-origin iframe:",e.message)}}r(`fmpooljs exposed to ${o} iframe(s)`)},a.version=n,a},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):e.fmpooljs=n(e.jQuery)});
