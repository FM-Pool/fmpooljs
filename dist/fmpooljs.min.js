!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e,n;e="undefined"!=typeof self?self:void 0,n=function(e){if(!e)throw new Error("fmpooljs requires jQuery to be loaded first!");const n="0.0.4";let o=!1;function t(...e){o&&(1==e.length&&("string"==typeof e[0]||e[0]instanceof String)?console.log("[fmpooljs] "+e):console.log("[fmpooljs] ",[...e]))}function i(e,s,l){!function(...e){console.log("[fmpooljs:info] "+e)}("init version "+n),t("createFmpool",e,s,l,e.location?.href,l);const f=e.sessionStorage;let a=e,u=null;function c(n,o){if(null!=u)return t("reinit",u,l,a.location?.href,u.location.href),r=i(u,u.$),u.fmpooljs=r,t("Reinitialized fmpooljs for iframe context:",u.location?.href||"(no href)",u),u=null,r(n,o);const c=s(n,o);return t("Selected elements:",n,c,e.location?.href),c.readonly=function(){var e=this.find("input"),n=this.find(".pss_editor_container");return this.removeClass("pss_readwrite").addClass("pss_readonly"),e.removeClass("pss_field_input").addClass("pss_read_only_editor").attr("readonly","readonly"),n.removeClass("pss_editor_container").addClass("pss_entry_editor"),this.find(".pss_actions").remove(),t("Set element readonly:",this),c},c.clear=function(){return c.val(""),t("Cleared element(s):",c),c},c.countAmountOfElements=function(){const e=this.length;return t("Counted elements:",e),e},c.saveAmountIfElementsToSession=function(e){const n=this.countAmountOfElements();return f.setItem(e,n),t("Saved element count to session:",e,"=",n),c},c.readonlyOnSessionCondition=function(e,n){const o=f.getItem(e);return("function"==typeof n?n(o):o===n)?(this.readonly(),t("Condition met for readonly:",e,o)):t("Condition not met for readonly:",e,o),c},c.saveValueToStore=function(e){const n=c.val();return t("Save value to store:",e,n),f.setItem(e,n),c},c.saveFieldValueToStore=function(e){const n=c.find("input").val();return t("Save field value to store:",e,n),f.setItem(e,n),c},c.clearOnSessionValueCondition=function(e,n){const o=f.getItem(e);return t("Check condition for clear value:",e,o,n),("function"==typeof n?n(o):o===n)&&(c.clear(),t("Value cleared",c)),c},c.prefillFromStore=function(e){const n=f.getItem(e);return t("Prefill from store",e,n,c),c.fillAutoCompleteTextField(n),c},c}return void 0!==l&&(u=l),c.setSessionItem=function(e,n){f.setItem(e,n),t("Session item set:",e,"=",n)},c.getSessionItem=function(e){const n=f.getItem(e);return t("Session item get:",e,"=",n),n},c.unevenCompare=function(e){const n=n=>n!=e;return t("unevenCompare created:",n),n},c.evenCompare=function(e){const n=n=>n==e;return t("evenCompare created:",n),n},c.enableLogging=function(){o=!0,t("Logging enabled")},c.disableLogging=function(){o=!1,t("Logging disabled")},c.version=n,c}let r=i(window,e);return r.reinitialize=function(e,n){if(!e||!n)return console.error("[fmpooljs] reinitialize() requires a window and jQuery instance."),null;const o=i(e,n);return e.fmpooljs=o,t("Reinitialized fmpooljs for iframe context:",e.location?.href||"(no href)"),o},r.exposeToIframes=function(){if(!window.frames||0===window.frames.length)return void t("No iframes found in this window");const n=Array.from(window.frames);let o=0;for(let r=0;r<n.length;r++){const s=n[r];try{s.fmpooljs=i(window,e,s),t("Attached fmpooljs to iframe:",s.location?.href||"(no href)"),o++}catch(e){t("Skipped cross-origin iframe:",e.message)}}t(`fmpooljs exposed to ${o} iframe(s)`)},r.version=n,r},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):e.fmpooljs=n(e.jQuery)});
