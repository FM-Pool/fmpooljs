!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e,o;e="undefined"!=typeof self?self:void 0,o=function(e){if(!e)throw new Error("fmpooljs requires jQuery to be loaded first!");const o="0.0.4",n=document.currentScript,t=n?.dataset;console.log(n,t);let i=!1;function r(...e){i&&(1==e.length&&("string"==typeof e[0]||e[0]instanceof String)?console.log("[fmpooljs] "+e):console.log("[fmpooljs] ",[...e]))}function s(n,f,a){!function(...e){console.log("[fmpooljs:info] "+e)}("init version "+o,t?.hideClass),r("createFmpool",n,f,a,n.location?.href,a,t);const c=n.sessionStorage;let u=n,d=null;function m(e,o){if(null!=d)return r("reinit",d,a,u.location?.href,d.location.href),l=s(d,d.$),d.fmpooljs=l,r("Reinitialized fmpooljs for iframe context:",d.location?.href||"(no href)",d),d=null,l(e,o);const t=f(e,o);return r("Selected elements:",e,t,n.location?.href),t.readonly=function(){var e=this.find("input"),o=this.find(".pss_editor_container");return this.removeClass("pss_readwrite").addClass("pss_readonly"),e.removeClass("pss_field_input").addClass("pss_read_only_editor").attr("readonly","readonly"),o.removeClass("pss_editor_container").addClass("pss_entry_editor"),this.find(".pss_actions").remove(),r("Set element readonly:",this),t},t.clear=function(){return t.val(""),r("Cleared element(s):",t),t},t.countAmountOfElements=function(){const e=this.length;return r("Counted elements:",e),e},t.saveAmountIfElementsToSession=function(e){const o=this.countAmountOfElements();return c.setItem(e,o),r("Saved element count to session:",e,"=",o),t},t.readonlyOnSessionCondition=function(e,o){const n=c.getItem(e);return("function"==typeof o?o(n):n===o)?(this.readonly(),r("Condition met for readonly:",e,n)):r("Condition not met for readonly:",e,n),t},t.saveValueToStore=function(e){const o=t.val();return r("Save value to store:",e,o),c.setItem(e,o),t},t.saveFieldValueToStore=function(e){const o=t.find("input").val();return r("Save field value to store:",e,o),c.setItem(e,o),t},t.clearOnSessionValueCondition=function(e,o){const n=c.getItem(e);return r("Check condition for clear value:",e,n,o),("function"==typeof o?o(n):n===o)&&(t.clear(),r("Value cleared",t)),t},t.prefillFromStore=function(e){const o=c.getItem(e);return r("Prefill from store",e,o,t),t.fillAutoCompleteTextField(o),t},t}return void 0!==a&&(d=a),t?.hideSelector&&(r("Hiding selector",t?.hideSelector),e(t.hideSelector).hide()),m.setSessionItem=function(e,o){c.setItem(e,o),r("Session item set:",e,"=",o)},m.getSessionItem=function(e){const o=c.getItem(e);return r("Session item get:",e,"=",o),o},m.unevenCompare=function(e){const o=o=>o!=e;return r("unevenCompare created:",o),o},m.evenCompare=function(e){const o=o=>o==e;return r("evenCompare created:",o),o},m.enableLogging=function(){i=!0,r("Logging enabled")},m.disableLogging=function(){i=!1,r("Logging disabled")},m.version=o,m}let l=s(window,e);return l.reinitialize=function(e,o){if(!e||!o)return console.error("[fmpooljs] reinitialize() requires a window and jQuery instance."),null;const n=s(e,o);return e.fmpooljs=n,r("Reinitialized fmpooljs for iframe context:",e.location?.href||"(no href)"),n},l.exposeToIframes=function(){if(!window.frames||0===window.frames.length)return void r("No iframes found in this window");const o=Array.from(window.frames);let n=0;for(let t=0;t<o.length;t++){const i=o[t];try{i.fmpooljs=s(window,e,i),r("Attached fmpooljs to iframe:",i.location?.href||"(no href)"),n++}catch(e){r("Skipped cross-origin iframe:",e.message)}}r(`fmpooljs exposed to ${n} iframe(s)`)},l.version=o,l},"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):e.fmpooljs=o(e.jQuery)});
