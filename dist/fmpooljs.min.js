!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e,n;e="undefined"!=typeof self?self:void 0,n=function(e){if(!e)throw new Error("fmpooljs requires jQuery to be loaded first!");const n="0.0.1";let o=!1;function t(...e){o&&(1==e.length&&("string"==typeof e[0]||e[0]instanceof String)?console.log("[fmpooljs] "+e):console.log("[fmpooljs] ",[...e]))}function i(e,s,f){!function(...e){console.log("[fmpooljs:info] "+e)}("init version "+n),t("createFmpool",e,s,f,e.location?.href,f);const l=e.sessionStorage;let a=e,c=null;function u(n,o){if(null!=c)return t("reinit",c,f,a.location?.href,c.location.href),r=i(c,c.$),c.fmpooljs=r,t("Reinitialized fmpooljs for iframe context:",c.location?.href||"(no href)",c),c=null,r(n,o);const u=s(n,o);return t("Selected elements:",n,u,e.location?.href),u.readonly=function(){var e=this.find("input"),n=this.find(".pss_editor_container");return this.removeClass("pss_readwrite").addClass("pss_readonly"),e.removeClass("pss_field_input").addClass("pss_read_only_editor").attr("readonly","readonly"),n.removeClass("pss_editor_container").addClass("pss_entry_editor"),this.find(".pss_actions").remove(),t("Set element readonly:",this),u},u.clear=function(){return u.val(""),t("Cleared element(s):",u),u},u.countAmountOfElements=function(){const e=this.length;return t("Counted elements:",e),e},u.saveAmountIfElementsToSession=function(e){const n=this.countAmountOfElements();return l.setItem(e,n),t("Saved element count to session:",e,"=",n),u},u.readonlyOnSessionCondition=function(e,n){const o=l.getItem(e);return("function"==typeof n?n(o):o===n)?(this.readonly(),t("Condition met for readonly:",e,o)):t("Condition not met for readonly:",e,o),u},u.saveValueToStore=function(e){const n=u.val();t("Save value to store:",e,n),l.setItem(e,n)},u.clearOnSessionValueCondition=function(e,n){const o=l.getItem(e);t("Check condition for clear value:",e,o,n),("function"==typeof n?n(o):o===n)&&(u.clear(),t("Value cleared",u))},u}return void 0!==f&&(c=f),u.setSessionItem=function(e,n){l.setItem(e,n),t("Session item set:",e,"=",n)},u.getSessionItem=function(e){const n=l.getItem(e);return t("Session item get:",e,"=",n),n},u.unevenCompare=function(e){const n=n=>n!=e;return t("unevenCompare created:",n),n},u.evenCompare=function(e){const n=n=>n==e;return t("evenCompare created:",n),n},u.enableLogging=function(){o=!0,t("Logging enabled")},u.disableLogging=function(){o=!1,t("Logging disabled")},u.version=n,u}let r=i(window,e);return r.reinitialize=function(e,n){if(!e||!n)return console.error("[fmpooljs] reinitialize() requires a window and jQuery instance."),null;const o=i(e,n);return e.fmpooljs=o,t("Reinitialized fmpooljs for iframe context:",e.location?.href||"(no href)"),o},r.exposeToIframes=function(){if(!window.frames||0===window.frames.length)return void t("No iframes found in this window");const n=Array.from(window.frames);let o=0;for(let r=0;r<n.length;r++){const s=n[r];try{s.fmpooljs=i(window,e,s),t("Attached fmpooljs to iframe:",s.location?.href||"(no href)"),o++}catch(e){t("Skipped cross-origin iframe:",e.message)}}t(`fmpooljs exposed to ${o} iframe(s)`)},r.version=n,r},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):e.fmpooljs=n(e.jQuery)});
